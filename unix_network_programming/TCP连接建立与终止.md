# TCP连接建立与终止

### TCP三次握手

##### 第一次握手

1. 客户端协议栈向服务端发送SYN包，并发送序列号j，客户端进入SYNC_SENT状态

##### 第二次握手

1. 服务器端收到序列号为j的包之后，与客户端进行应答，回答值为j+1，表示对SYN包j的确认
2. 同时也发送一个SYN包，序列号为k，服务器端进入SYNC_RCVD状态

##### 第三次握手

1. 客户端收到ACK之后，从connect调用返回，表示客户端到服务端的单向连接建立成功，客户端状态为ESTABLISHED，同时会进行应答发送k+1
2. 应答包到服务器之后，服务器端从accept返回，服务端到客户端的单向连接也建立成功，服务端进入了ESTABLISHED

------

### TCP四次挥手

