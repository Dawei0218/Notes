# 常用编译命令

### 预处理命令

```
gcc -E hello.c -o hello.i
```

------

### 编译

```
gcc -S hello.i -o hello.s
```

------

### 汇编

```
as hello.s -o hello.o
gcc -c hello.s -o hello.o
```

------

### 链接

```
ld xxx
```

------

### 查看ELF Header

```
readelf -h test.o
```

------

### 查看目标文件结构

```
objdump -h test.o
```

------

### 查看各个段的内容

```shell
# -s 16进制展示 -d 指令反汇编
objdump -s -d test.o
```

------

### 查看ELF文件段表内容

```
readelf -S test.o
```

------

### 自定义段

```c
// 可以放到指定的段里
__attribute__((section("Foo"))) global = 42;
```

------

### 关闭内置优化

```
gcc -fno-builtin hello.c
```

------

### ld

```shell
# static表示静态链接 -e表示入口
ld -static -e xx -o xx xxx
```

