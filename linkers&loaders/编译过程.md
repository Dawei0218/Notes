# 编译过程

### 预编译

```
1. 将所有#define删除，展开宏定义
2. 处理所有条件预编译指令，比如#if、#ifdef等
3. 处理所有#include命令，将被包含的文件插入到预编译命令的位置
4. 删除所有注释//和/* */
5. 添加行号和文件名标识，以便于编译时编译器产生调试用的行号信息以及编译错误或警告时能够显示行号
6. 保留所有#pragma编译器指令，编译器需要使用他们
```

预编译过程主要处理#开始的预编译命令，比如#include和#define等，以上就是处理规则。

------

### 编译

编译过程把预处理完的文件进行一系列词法分析、语法分析、语义分析及优化后生成相应的汇编文件，这个过程是核心部分，也是最复杂的部分之一。现在版本的gcc已经把预编译和编译合为一个步骤了。

------

### 汇编

汇编器将汇编代码转变成机器可以执行的指令，每一条汇编语句几乎都对应一条机器指令。所以汇编过程比编译过程相对简单一些。

------

### 链接

链接器把目标文件和库链接在一起，形成最终的可执行文件。