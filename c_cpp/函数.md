# 函数

### 函数

```c
// 括号内加void是ANSI C标准
// c++括号内不需要void
int main(void) {}
void main() {}

// 函数原型，任何函数在使用函数前都要声明该函数原型
void func(void);

// 带形式参数的函数
void func(int num);

// 只有在函数定义和函数原型的时候才可以用ar[]代替*ar
// 对于数组只能传递指针，如果不想被修改可以加上const限定符
int sum(int ar[], int num);

// a+1 = 该地址加上16个字节，如果两对括号是空，编译器不知道怎么处理
int sum(int a[][]); // 错误
int sum(int a[][4]); // 正确
```

-------

### 内联函数

```c
inline static void eatline() {}
```

------

### 函数指针

```c
int sum(int a, int b)
{
    return a + b;
}

int main(void)
{
    int (*p)(int, int) = sum;
    
    (*p)(1, 2);
    
    return 0;
}
```

------

### 可变形参

```cpp
// c
#include <stdarg.h>

int demo(int a, ...) {
    va_list valist;
    
    // 初始化，第二个参数是函数的前一个参数
    va_start(valist, a);
    
    /* 访问所有赋给 valist 的参数 */
    for (i = 0; i < num; i++) {
       sum += va_arg(valist, int);
    }
    /* 清理为 valist 保留的内存 */
    va_end(valist);
}

// c++
#include <initializer_list>
using std::initializer_list;

void demo(initializer_list<int> ls) {
  for (auto begin = ls.begin(); begin != ls.end(); ++begin)
    cout << *begin << endl;
}

demo({1, 2, 3, 4, 5});

```





