# 动态内存

### shared_ptr

```cpp
#include <memory>

using std::make_shared;
using std::shared_ptr;

// 默认初始化的指针保存一个空指针
// 通过引用计数释放内存，例如局部shared_ptr离开作用域，计数器会增加
shared_ptr<int> q = make_shared<int>(10); // 返回一个动态分配的shared_ptr对象使用args初始化
shared_ptr<int> q(new int(10));
    
// shared_ptr<T>p(q);
// p是q的拷贝，会增加q的引用计数
shared_ptr<int> p(q);
p = q; // p的引用计数会递减，q会增加
```

------

### unique_ptr

```cpp
// 某个时刻只能指向一个给定对象，
// 需要绑定到一个new返回的指针上，初始化unique_ptr必须采用直接初始化，绑定到一个new返回的指针上
unique_ptr<int> p1(new int(1));
```

-------

### new

```cpp
// 返回一个指向该对象的指针
int *p = new int;

// 指向10这个对象
int *p = new int(10);
delete p;

int *p = new int[10];
delete [] p;
```

------

### allocator

```cpp
allocator<string> alloc;
auto const p = alloc.allocate(n);
```











