# 表访问

```
CREATE TABLE single_table (
        id INT NOT NULL AUTO_INCREMENT,
        key1 VARCHAR(100),
        key2 INT,
        key3 VARCHAR(100),
        key_part1 VARCHAR(100),
        key_part2 VARCHAR(100),
        key_part3 VARCHAR(100),
        common_field VARCHAR(100),
        PRIMARY KEY (id),
        KEY idx_key1 (key1),
        UNIQUE KEY idx_key2 (key2),
        KEY idx_key3 (key3),
        KEY idx_key_part(key_part1, key_part2, key_part3)
) Engine=InnoDB CHARSET=utf8;
```

------

### 访问方法

const。通过主键列、唯一二级索引列定位一条记录

ref。普通的二级索引列与常数进行等值比较

ref_or_null  二级索引列的值等于某个常数的记录，还想把该列的值为 NULL 的记录也找出 来

range   利用索引进行范围匹配

index。遍历整个二级索引

all  全表



eq_ref 被驱动表使用主键 值或者唯一二级索引列的值

------

### 连接

join buff，可能被驱动表很大，执行连接前申请一块固定大小的内存，先把若干条驱动表结果集 中的记录装在这个 join buffer 中，然后开始扫描被驱动表，每一条被驱动表的记录一次性和 join buffer 中的 多条驱动表记录做匹配。如果放不下所有驱动表记录会重复执行这个过程。基于块的嵌套连接 (Block Nested-Loop Join)

