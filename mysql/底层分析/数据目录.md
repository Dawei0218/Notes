# 数据目录

> 基于MySQL 5.7.22

### 数据库在文件系统中的表示

create database在文件系统发生了以下操作

- 在数据目录下创建一个与数据库名同名的子目录（文件夹）
- 在该子目录下创建一个名为db.opt的文件，该文件包含了该数据库的一些属性（数据库字符集和比较规则）

------

### 表在文件系统中的表示

表信息分为两种

- 表结构定义。在子目录内，文件名为`表名.frm` 的二进制文件。

- 表中的数据

------

### InnoDB数据存储

为了更好的管理数据页，提出了一个 表空间(table space) 或者 文件空间( file space)的概念，对应文件系统上的一个或多个真实文件。

表空间有以下两种类型

- 系统表空间
  - 默认情况下InnoDB会在数据目录（不是数据库的子目录）下创建一个名为ibdata1，大小12M的文件，是自扩展的
  - MySQL5.5.7 - MySQL5.6.5，表中数据会存储到系统表
- 独立表空间
  - MySQL5.6.6，InnoDB不再默认把各个表的数据存储到系统表空间，而是一个表建立一个独立表空间
  - 会在数据库对应的子目录创建一个表是该独立表空间的文件`表名.idb`
  - 







innodb引擎为了更好的管理页，

这个表空间是一个抽象的概念，它可以对应文件系统上一个或多个真实文件(不同表 空间对应的文件数量可能不同)。每一个 表空间 可以被划分为很多很多很多个 页 ，我们的表数据就存放在某 个 表空间 下的某些页里。



分为 系统表空间 和 独立表空间 以及其他表空间



系统表空间对应文件系统上一个或多个实际的文件，默认情况下， InnoDB 会在 数据目录 下创 建一个名为 ibdata1 (在你的数据目录下找找看有木有)、大小为 12M 的文件，这个文件就是对应的 系统表空 间 在文件系统上的表示。不够用时会自动增加文件大小

MySQL5.5.7到MySQL5.6.6之间的各个版 本中，我们表中的数据都会被默认存储到这个系统表空间 。



独立表空间，MySQL5.6.6以及之后的版本中 ，InnoDB 并不会默认的把各个表的数据存储到系统表空间中，而是为每一个表 建立一个独立表空间，。使用 独立表空间 来存储表数据 的话，会在该表所属数据库对应的子目录下创建一个表示该 独立表空间 的文件，文件名和表名相同，只不过添 加了一个 .ibd 的扩展名



其他类型表空间，随着MySQL的发展，除了上述两种老牌表空间之外，现在还新提出了一些不同类型的表空间，比如通用表空间 (general tablespace)、undo表空间(undo tablespace)、临时表空间(temporary tablespace)吧啦吧啦 的，具体情况我们就不细唠叨了，等用到的时候再提。