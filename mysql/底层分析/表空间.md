# 表空间

### 区的概念

表空间被划分为许多连续的区 ，每个区默认由64个页组成，每256个区划分为一组，每个组的最开始的几个页面类型是固定的就好了



表空间的页过多，不方便管理延伸出区的概念，连续64个页就是一个区（1MB）。

表空间由若干个区组成，每256个区被划分成一组

每个组的前三个页面是固定的

	- FSP_HDR 类型:这个类型的页面是用来登记整个表空间的一些整体属性以及本组所有的 区 ，也就是
	- IBUF_BITMAP 类型:这个类型的页面是存储本组所有的区的所有页面关于 INSERT BUFFER 的信息。当 然，你现在不用知道啥是个 INSERT BUFFER ，后边会详细说到你吐。
	- INODE 类型:这个类型的页面存储了许多称为 INODE 的数据结构，还是那句话，现在你不需要知道啥是 个 INODE ，后边儿会说到你吐。



其余各组最开始的2个页面的类型是固定的，也就是说 extent 256 、 extent 512 这些区最开始的2个页面 的类型是固定的，分别是:

 - XDES 类型:全称是 extent descriptor ，用来登记本组256个区的属性，也就是说对于在 extent 256 区中的该类型页面存储的就是 extent 256 ~ extent 511 这些区的属性，对于在 extent 512 区中的该 类型页面存储的就是 extent 512 ~ extent 767 这些区的属性。上边介绍的 FSP_HDR 类型的页面其实 和 XDES 类型的页面的作用类似，只不过 FSP_HDR 类型的页面还会额外存储一些表空间的属性。

	- IBUF_BITMAP 类型:上边介绍过了。

------

### 段的概念

叶子节点有自己的区，非叶子节点也有自己的区

存放叶子节点的区的集合就算是一个 段 ( segment )，存放非叶 子节点的区的集合也算是一个 段 。也就是说一个索引会生成2个段，一个叶子节点段，一个非叶子节点段。

-------

空闲的区:现在还没有用到这个区中的任何页面。

有剩余空间的碎片区:表示碎片区中还有可用的页面。 

没有剩余空间的碎片区:表示碎片区中的所有页面都被使用，没有空闲页面。 附属于某个段的区。每一个索引都可以分为叶子节点段和非叶子节点段，

除此之外InnoDB还会另外定义一些 特殊作用的段，在这些段中的数据量很大时将使用区来作为基本的分配单位。





