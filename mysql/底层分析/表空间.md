# 表空间

> 为了更好的管理数据页，提出了一个 表空间的概念，对应文件系统上的一个或多个真实文件。
>
> 分为 系统表空间 以及 独立表空间

### 区

连续的`64`个页就是一个区`（1M）`，每`256`个区划分为一组。



***区的分类***

| 状态名    | 含义                     |
| --------- | ------------------------ |
| FREE      | 空闲的区                 |
| FREE_FRAG | 有剩余空闲页面的碎片区   |
| FULL_FRAG | 没有剩余空闲页面的碎片区 |
| FSEG      | 附属于某个段的区         |

- FREE、FREE_FRAG、FULL_FRAG直属于表空间。



***XDES Entry***

| 名称              | 描述                                                         |
| ----------------- | ------------------------------------------------------------ |
| Segment ID        | 该区所在的段                                                 |
| List Node         | 链表                                                         |
| State             | FREE、FREE_FRAG、FULL_FRAG、FSEG                             |
| Page State Bitmap | 128位被划分为64个部分，每个部分两位，对应一个页。第一位表示页是否空闲，第二位保留 |

- 每一个区都对应一个XDES Entry结构


------

### 段

- 叶子节点与非叶子节点都有自己独有的区
- 存放叶子节点的区的集合就算是一个段，存放非叶子节点的区的集合也算一个段
- 一个索引会生成两个段 `叶子节点段`与`非叶子节点段`
- 段是以区为单位申请的，数据量比较小的表先使用碎片区，当段占用了32个碎片区页面时，在以完整的区为单位分配存储空间

------

### List Base Node

包含链表的头尾节点

------

### INODE Entry

每个段对应一个INODE Entry结构

segment id、NOT_FULL_N_USED、三个链表、Fragment Array Entry 对应一个零散页面
