# B+树索引

### 目录项

- 非叶子节点就是目录项，目录项存储主键id对应页号
- 目录项只有主键id（对应页号的中最小的主键id）和页编号两个列
- 目录项纪录的`record_type` = 1
- 只有目录项纪录的`min_rec_flag`属性才有可能为1，目录项中最小的纪录的min_rec_flag属性才会等于1
- 也会生成Page Directory用于加速查询
- 根据层级还会有目录项的目录项，最下面的层级为第0层，之后层级依次往上增加

------

### 根节点

- 每当为某个表创建一个B+树索引时，都会为这个索引创建一个根节点。
- 随后向表中插入用户记录时，先把用户记录存储到这个根节点中。
- 在根节点空间用完时会进行以下操作
  1. 将根节点中的所有记录复制到一个新分配的页（页a）
  2. 然后对这个新页进行页分裂操作，得到一个新页（页b），根据新插入记录的健值放到页a或者页b中
  3. 根节点升级为存储目录项的页
