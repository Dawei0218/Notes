# 函数与程序结构

### 函数

```c
int demo(int a) {} // int是返回类型, int a是参数
```

------

### 复合字面量

```c
(int []) {1, 2, 3}
(int [2]) {1, 2}

demo((int [2]) {1, 2}, (int []) {1, 2, 3});
```

------

### 外部变量(external)

```c
// file1
int a;
// file2 可以使用并且修改file1的值
extern int a; 
```

c语言由一系列外部对象构成，这些外部变量可能是变量或函数。

局部变量在函数调用时创建，在退出时销毁。而外部变量是永久存在的。

外部变量声明和使用不在同一个文件夹，就需要使用extern

------

### static变量

```c
static int a = 10;
static int demo() {}
```

static仅供其声明的源文件的函数使用，其他函数不能访问。

static也可以用于声明函数。

static也可以声明内部变量，它一直存在。

------

### 寄存器变量

```c
register int x;
```

使用频率较高，放入机器的寄存器里。

------

### 宏替换

```c
#define 名字 替换文本
#define max(A, B) ((A) > (B) ? (A) : (B)) // 使用参数必须在括号
#define square(x) x * x  // 错误写法，没有括号
```

出现名字标记的地方都会被替换成文本，如果有多行需要在待续的行末尾加上\。

为什么要加上括号，如果使用square(a+1)，会被替换成 x+1 * a + 1，所以加上括号保证运算正确性。

------

### 条件包含

```c
#ifndef HDR
#define HDR

// .h文件

#endif
```

