# 函数

### 函数

```c
// void是ANSI C标准，一些编译器允许第二种写法，但是所有标准都未认可
int main(void) {}
void main() {}

// 函数原型，任何函数在使用函数前都要声明该函数原型
void func(void);

// 带形式参数的函数
void func(int num)；

// 只有在函数定义和函数原型的时候才可以用ar[]代替*ar
// 对于数组只能传递指针，如果不想被修改可以加上const限定符
int sum(int ar[], int num)；
```

-------

### 内联函数

```c
// 不会函数调用，直接嵌到调用处
inline static void eatline() {}
```

------

### 外部变量(external)

```c
// file1
int a;
// file2 可以使用并且修改file1的值
extern int a; 
```

1. 函数或全局变量默认是external，在其他源文件使用extern声明时，引用的是同一个对象
2. 外部变量在程序允许时就存在内存中。

------

### 内部变量(internal)

1. 在代码内部声明的变量缺省类型是自动(auto)变量，存储在堆栈中。
2. 如果加上static就是静态变量。
3. 局部变量在函数调用时创建，在退出时销毁。

------

### static变量

```c
static int a = 10;
static int demo() {}
```

1. 默认声明具有external链接属性，static可以使它的链接属性变成internal（函数与变量都变成internal）。
2. static也可以声明内部变量，就会从自动变量变成static变量，只能在函数内部使用。
3. 代码块外部的变量缺省存储于静态内存中，如果加上static就是限制链接属性。


------

### 宏替换

```c
#define 名字 替换文本
#define max(A, B) ((A) > (B) ? (A) : (B)) // 使用参数必须在括号
#define square(x) x * x  // 错误写法，没有括号

// #表示吧宏的参数替换成字符串常量
#define  message_for(a, b)  \
    printf(#a " and " #b ": We love you!\n")
// message_for(Carole, Debra); result: Carole and Debra: We love you!

// ## 可以把两个标记合并为一个标记 result: 输出token34的值
#define tokenpaster(n) printf ("token" #n " = %d", token##n)
int token34 = 40;
tokenpaster(34);
```

出现名字标记的地方都会被替换成文本，如果有多行需要在待续的行末尾加上\。

为什么要加上括号，如果使用square(a+1)，会被替换成 x+1 * a + 1，所以加上括号保证运算正确性。

------

### 条件包含

```c
#ifndef HDR
#define HDR

// .h文件

#endif
```

