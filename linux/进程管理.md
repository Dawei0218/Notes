# 进程管理

### ps

```shell
ps # 查看当前终端进程
PID  TTY(登录终端)  TIME(运行时间没有参考意义) CMD
23055 pts/1    		00:00:00 				su
23057 pts/1    		00:00:00 				bash

ps -e # 查看所有进程
ps -ef 
UID(有效用户id)        PID  PPID  C(cpu使用占比)  STIME TTY          TIME CMD
root         		  2     0    0     			2020 ?        00:00:02 [kthreadd]
root         		  3     2    0     			2020 ?        00:00:00 [rcu_gp]

ps -eLf # 可以查看线程
UID        PID  PPID   LWP(轻量级线程id)    C  NLWP(线程数) STIME TTY          TIME CMD
root         1     0     1  			 0    1          2020 ?        00:03:52 /usr/lib/systemd/systemd
root         2     0     2  			 0    1          2020 ?        00:00:02 [kthreadd]
```

------

### pstree

进程以树状结构

------

### top

```shell
top - 19:02:42 up 299 days(已经运行时间),  2:51,  1 user(正在登录的用户数),  load average: 0.00, 0.00, 0.00(1分钟 5分钟 15分钟 如果是1就是满负载)
Tasks: 117 total,   1 running, 116 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us(用户空间),  0.7 sy(内核空间),  0.0 ni(改变优先级占比), 99.0 id(空闲),  0.0 wa(等待输入输出),  0.0 hi(服务于硬件中断),  0.0 si(服务软中断),  0.0 st
MiB Mem :   1829.5 total,    124.0 free,    390.8 used,   1314.8 buff/cache
MiB Swap:      0.0 total,      0.0 free,      0.0 used.   1262.5 avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
28707 root      10 -10  179724  34252  16844 S   0.3   1.8  46:48.85 AliYunDun
    1 root      20   0  184756   7348   4468 S   0.0   0.4   3:52.46 systemd                                  
    2 root      20   0       0      0      0 S   0.0   0.0   0:02.92 kthreadd                                  
    3 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 rcu_gp                          
    4 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 rcu_par_gp
    6 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 kworker/0:0H
    8 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 mm_percpu_wq
    9 root      20   0       0      0      0 S   0.0   0.0   0:49.72 ksoftirqd/0     
```

1会把每个逻辑cpu的情况列出来

s会把更新时间从3秒改为1秒

P cpu排序

M memory排序

------

### nice

```shell
nice -n 10 ./exec  # 跳转优先级为10
renice -n 
```

------

### jobs

```shell
jobs
[1]+  Running                 ./test &
fg 1 # 通过编号让后台程序调回到前台
bg 1 # ctrl z暂停得程序 回到后台运行
```

会显示后台运行程序

------

### kill

```shell
kill -l # 信号列比奥
kill -9 pid # 杀掉进程
```

------

### nohup

```shell
nohup ./exec & 
```

&后台运行在终端退出时收到SIGHUP信号，而nohup就会忽略这个信号

------

### systemctl

```shell
systemctl start | stop | restart | status | reload | enable | disable 服务名称
```

软件包安装的服务单元 /usr/lib/systemd/system

enable随着开机自动启动

