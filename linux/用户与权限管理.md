# 用户与权限管理

### 用户分类

```shell
# Linux用户分为两类，root用户(#显示)以及普通用户($显示)
[root@iZ2zeiifkas8pqdf66p4f0Z ~]# ls
[root@iZ2zeiifkas8pqdf66p4f0Z ~]$ ls
```

root用户可以访问家目录以及配置文件，也可以访问普通用户家目录。

普通用户只能访问自己的家目录以及root开放给他的权限。

------

### useradd

```shell
useradd username # 创建一个username的用户
useradd -g group username # 创建一个用户并且指定组
```

创建用户，家目录是/home/username。如果没有指定组，就会创建一个和用户同名的组。

/etc/passwd包含了用户信息

/etc/shadow也会添加一行，密码相关的文件

------

### passwd

```shell
passwd # 修改root密码
passwd username # 修改指定用户密码
```

设置或修改用户密码

------

### userdel

```shell
userdel username # 删除用户
userdel -r username # 删除用户并且删除家目录
```

删除用户

------

### usermod

```shell
usermod -d dir username # 修改用户家目录
usermod -g group username # 修改用户的所属组
```

------

### chage

```shell

```

更改用户密码过期时间，用户过期时间。

------

### groupadd

```shell
groupadd group1
```

比如希望几个用户有相同的权限，就可以创建一个用户组

------

### groupdel

删除一个用户组

------

###  su

```shell
su - user # 切换用户并且切换环境，也会切换到用户的家目录
```

临时切换用户

------

### sudo

```shell
visudo
%user ALL=/sbin/shutdown -c #被用户组3被赋予可以执行shutdown的权限，不加%就是用户
```

以自己的身份，执行其他用户身份的指令。

visudo是配置用户具有哪些权限，如果不知道命令在哪可以用which命令。

-------

### 用户和用户组配置文件

```
/etc/passwd
root:x:0:0:root:/root:/bin/bash
用户名:是否需要输入密码(x需要 空不需要):uid:gid:注释:用户家目录:login shell(设置为/sbin/nologin不能登录终端)

/etc/shadown
wangmaolin:$6$x5aq7zXv6vWUaMl8$G1kLIBmeqilo8eQCGxcew6uP1fKjLgvMf58j34Tk3rRinXR1:18727:0:99999:7:::
用户名称:用户加密之后的密码:

/etc/group
wangmaolin:x:1000:
用户组:是否需要登录:gid:其他组设置
```

/etc/passwd：新建用户就会在里面写入一行

/etc/shadow：保存用户和用户密码相关的内容

/etc/group：和用户组相关的配置文件

------

### id

```
id username
```

返回uid gid groups



